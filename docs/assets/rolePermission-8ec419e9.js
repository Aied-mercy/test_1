import{a7 as m,a8 as _,h as V,o as C,k as E,O as s,P as l,l as p,S as k,x as a}from"./index-4a87ef63.js";import{c as w,E as F,a as I,b as y,d as $}from"./el-table-column-aa0a386d.js";import{b as v,c as T,E as z}from"./el-input-cd004665.js";import{E as d}from"./index-dc3a6063.js";import{f as R}from"./index-161bf4db.js";import"./typescript-321b3032.js";const q=e=>m.request({url:"/api/rolePermission/all",params:e}),B=e=>m.request({url:"/api/rolePermission/add",method:"post",data:e}),D=e=>m.request({url:"/api/rolePermission/edit",method:"post",data:e}),A=e=>m.request({url:"/api/rolePermission/delete",params:e}),N=V({data(){return{rolePermissions:[],page:{total:0,current:1,size:5},dialogFormVisible:!1,rolePermission:{createTime:"",id:0,permissionIds:"",roleId:0,updateTime:""},formLabelWidth:80}},mounted(){this.getRolePermissionsPage(1)},methods:{get(){this.$router.push({path:"/index",params:{id:1}})},toEdit(e){console.log(e),this.dialogFormVisible=!0,this.rolePermission=w(e)},getRolePermissionsPage(e){q().then(o=>{console.log(o);const t=o.data;console.log(t),this.rolePermissions=t.rolePermissions}).catch(o=>{console.log(o)})},currentchange(e){this.getRolePermissionsPage(e),this.page.current=e},dele(e){A({id:e}).then(t=>{if(console.log(e),t.success)this.getRolePermissionsPage(this.page.current);else return console.log(t.msg),!1}).catch(t=>{}),this.dialogFormVisible1=!1},toAdd(){this.dialogFormVisible=!0},save(){const e=this.rolePermission;e.id==0?B(e).then(o=>{if(console.log(o.success),o.success)this.dialogFormVisible=!1,this.getRolePermissionsPage(this.page.current),d(o.msg);else return d(o.msg),!1}).catch(o=>{d("网络错误联系管理员或者格式错误")}):D(e).then(o=>{if(console.log(o.success),o.success)this.dialogFormVisible=!1,this.getRolePermissionsPage(this.page.current),d(o.msg);else return d(o.msg),!1}).catch(o=>{d("网络错误联系管理员Edit")})}}}),U={style:{margin:"80px 150px"}},L={style:{margin:"10px 0px"}},M={class:"dialog-footer"};function O(e,o,t,S,W,j){const r=R,n=$,c=F,f=I,u=v,g=T,h=z,P=y;return C(),E(k,null,[s(r,{onClick:e.get},{default:l(()=>[a("返回")]),_:1},8,["onClick"]),p("div",U,[p("div",L,[s(r,{type:"info",onClick:e.toAdd,round:""},{default:l(()=>[a("添加")]),_:1},8,["onClick"])]),s(c,{data:e.rolePermissions,style:{width:"100%","border-style":"solid","border-width":"medium"},"header-cell-style":{"text-align":"center"}},{default:l(()=>[s(n,{fixed:"",prop:"id",label:"ID",align:"center",width:"100"}),s(n,{prop:"permissionIds",label:"权限",align:"center",width:"200"}),s(n,{prop:"roleId",label:"角色编号",align:"center",width:"140"}),s(n,{prop:"createTime",label:"创建时间",align:"center",width:"250"}),s(n,{prop:"updateTime",label:"更新时间",align:"center",width:"250"}),s(n,{fixed:"right",label:"操作",align:"center",width:"220"},{default:l(i=>[s(r,{type:"info",size:"small",onClick:b=>e.toEdit(i.row)},{default:l(()=>[a("更新")]),_:2},1032,["onClick"]),s(r,{type:"info",size:"small",onClick:b=>e.dele(i.row.id)},{default:l(()=>[a("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),s(f,{"current-page":e.page.current,total:e.page.total,"page-size":e.page.size,onCurrentChange:e.getPermissionsPage},null,8,["current-page","total","page-size","onCurrentChange"])]),s(P,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":o[3]||(o[3]=i=>e.dialogFormVisible=i),title:"用户编辑"},{footer:l(()=>[p("span",M,[s(r,{onClick:o[2]||(o[2]=i=>e.dialogFormVisible=!1)},{default:l(()=>[a("取消")]),_:1}),s(r,{type:"primary",onClick:e.save},{default:l(()=>[a(" 保存 ")]),_:1},8,["onClick"])])]),default:l(()=>[s(h,{model:e.rolePermission},{default:l(()=>[s(g,{label:"权限","label-width":140},{default:l(()=>[s(u,{modelValue:e.rolePermission.permissionIds,"onUpdate:modelValue":o[0]||(o[0]=i=>e.rolePermission.permissionIds=i),autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(g,{label:"角色编号","label-width":140},{default:l(()=>[s(u,{modelValue:e.rolePermission.roleId,"onUpdate:modelValue":o[1]||(o[1]=i=>e.rolePermission.roleId=i),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const Y=_(N,[["render",O]]);export{Y as default};
