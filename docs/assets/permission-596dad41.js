import{a7 as u,a8 as w,h as E,o as P,k,O as l,P as t,l as f,S as y,x as p}from"./index-4a87ef63.js";import{c as _,E as F,a as $,b as v,d as z}from"./el-table-column-aa0a386d.js";import{b as T,c as U,E as q}from"./el-input-cd004665.js";import{E as m}from"./index-dc3a6063.js";import{f as B}from"./index-161bf4db.js";import"./typescript-321b3032.js";const D=e=>u.request({url:"/api/permission/page",method:"post",data:e}),I=e=>u.request({url:"/api/permission/add",method:"post",data:e}),A=e=>u.request({url:"/api/permission/edit",method:"post",data:e}),N=e=>u.request({url:"/api/permission/delete",params:e}),H=E({data(){return{permissions:[],page:{total:0,current:1,size:5},dialogFormVisible:!1,permission:{code:"",createTime:"",deleted:0,description:"",hasChildren:0,id:0,pid:0,type:"",updateTime:"",url:""},formLabelWidth:80}},mounted(){this.getPermissionsPage(1)},methods:{get(){this.$router.push({path:"/index",params:{id:1}})},formatterHasChildren(e){return e.hasChildren==0?"无":e.hasChildren==1?"有":e.hasChildren},toEdit(e){console.log(e),this.dialogFormVisible=!0,this.permission=_(e)},getPermissionsPage(e){D({current:e,size:5}).then(a=>{console.log(a);const g=a.data.page;this.permissions=g.records,this.page=g}).catch(a=>{console.log(a)})},currentchange(e){this.getPermissionsPage(e),this.page.current=e},dele(e){N({id:e}).then(a=>{if(console.log(e),a.success)this.getPermissionsPage(this.page.current);else return console.log(a.msg),!1}).catch(a=>{}),this.dialogFormVisible1=!1},toAdd(){this.dialogFormVisible=!0},save(){const e=this.permission;e.id==0?I(e).then(o=>{if(console.log(o.success),o.success)this.dialogFormVisible=!1,this.getPermissionsPage(this.page.current),m(o.msg);else return m(o.msg),!1}).catch(o=>{m("网络错误联系管理员")}):A(e).then(o=>{if(console.log(o.success),o.success)this.dialogFormVisible=!1,this.getPermissionsPage(this.page.current),m(o.msg);else return m(o.msg),!1}).catch(o=>{m("网络错误联系管理员Edit")})}}}),L={style:{margin:"80px 150px"}},M={style:{margin:"10px 0px"}},O={class:"dialog-footer"};function S(e,o,a,g,W,j){const n=B,s=z,c=F,h=$,r=T,d=U,b=q,V=v;return P(),k(y,null,[l(n,{onClick:e.get},{default:t(()=>[p("返回")]),_:1},8,["onClick"]),f("div",L,[f("div",M,[l(n,{type:"info",onClick:e.toAdd,round:""},{default:t(()=>[p("添加")]),_:1},8,["onClick"])]),l(c,{data:e.permissions,style:{width:"100%","border-style":"solid","border-width":"medium"},"header-cell-style":{"text-align":"center"}},{default:t(()=>[l(s,{fixed:"",prop:"id",label:"ID",align:"center",width:"60"}),l(s,{prop:"code",label:"法典",align:"center",width:"100"}),l(s,{prop:"description",label:"名称",align:"center",width:"100"}),l(s,{prop:"url",label:"路径",align:"center",width:"160"}),l(s,{prop:"type",label:"类型",align:"center",width:"100"}),l(s,{prop:"pid",label:"父编号",align:"center",width:"100"}),l(s,{prop:"hasChildren",label:"子权限",align:"center",width:"110",formatter:e.formatterHasChildren},null,8,["formatter"]),l(s,{prop:"createTime",label:"创建时间",align:"center",width:"140"}),l(s,{prop:"updateTime",label:"更新时间",align:"center",width:"140"}),l(s,{fixed:"right",label:"操作",align:"center",width:"140"},{default:t(i=>[l(n,{type:"info",size:"small",onClick:C=>e.toEdit(i.row)},{default:t(()=>[p("更新")]),_:2},1032,["onClick"]),l(n,{type:"info",size:"small",onClick:C=>e.dele(i.row.id)},{default:t(()=>[p("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(h,{"current-page":e.page.current,total:e.page.total,"page-size":e.page.size,onCurrentChange:e.getPermissionsPage},null,8,["current-page","total","page-size","onCurrentChange"])]),l(V,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":o[7]||(o[7]=i=>e.dialogFormVisible=i),title:"用户编辑"},{footer:t(()=>[f("span",O,[l(n,{onClick:o[6]||(o[6]=i=>e.dialogFormVisible=!1)},{default:t(()=>[p("取消")]),_:1}),l(n,{type:"primary",onClick:e.save},{default:t(()=>[p(" 保存 ")]),_:1},8,["onClick"])])]),default:t(()=>[l(b,{model:e.permission},{default:t(()=>[l(d,{label:"法典","label-width":140},{default:t(()=>[l(r,{modelValue:e.permission.code,"onUpdate:modelValue":o[0]||(o[0]=i=>e.permission.code=i),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(d,{label:"名称","label-width":140},{default:t(()=>[l(r,{modelValue:e.permission.description,"onUpdate:modelValue":o[1]||(o[1]=i=>e.permission.description=i),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(d,{label:"路径","label-width":140},{default:t(()=>[l(r,{modelValue:e.permission.url,"onUpdate:modelValue":o[2]||(o[2]=i=>e.permission.url=i),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(d,{label:"类型","label-width":140},{default:t(()=>[l(r,{modelValue:e.permission.type,"onUpdate:modelValue":o[3]||(o[3]=i=>e.permission.type=i),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(d,{label:"父编号","label-width":140},{default:t(()=>[l(r,{modelValue:e.permission.pid,"onUpdate:modelValue":o[4]||(o[4]=i=>e.permission.pid=i),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(d,{label:"子权限","label-width":140},{default:t(()=>[l(r,{modelValue:e.permission.hasChildren,"onUpdate:modelValue":o[5]||(o[5]=i=>e.permission.hasChildren=i),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const Y=w(H,[["render",S]]);export{Y as default};
