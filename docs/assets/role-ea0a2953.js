import{a7 as m,a8 as V,h as E,o as k,k as F,O as o,P as l,l as p,S as w,x as n}from"./index-36213b95.js";import{c as y,E as P,a as $,b as v,d as z}from"./el-table-column-581a99b2.js";import{b as N,c as R,E as T}from"./el-input-3ea27ed3.js";import{E as d}from"./index-f3aaa962.js";import{f as q}from"./index-eba3c6bf.js";import"./typescript-ff198bef.js";const B=e=>m.request({url:"/api/role/page",method:"post",data:e}),D=e=>m.request({url:"/api/role/add",method:"post",data:e}),I=e=>m.request({url:"/api/role/edit",method:"post",data:e}),A=e=>m.request({url:"/api/role/delete",params:e}),S=E({data(){return{roles:[],page:{total:0,current:1,size:5},dialogFormVisible:!1,role:{createTime:"",deleted:0,description:"",id:0,roleName:"",status:0,updateTime:""},formLabelWidth:80}},mounted(){this.getRolesPage(1)},methods:{get(){this.$router.push({path:"/index",params:{id:1}})},formatterState(e){return e.status==0?"未激活":e.status==1?"激活":e.status},toEdit(e){console.log(e),this.dialogFormVisible=!0,this.role=y(e)},getRolesPage(e){B({current:e,size:5}).then(a=>{console.log(a);const u=a.data.page;this.roles=u.records,this.page=u}).catch(a=>{console.log(a)})},currentchange(e){this.getRolesPage(e),this.page.current=e},dele(e){A({id:e}).then(a=>{if(console.log(e),a.success)this.getRolesPage(this.page.current);else return console.log(a.msg),!1}).catch(a=>{}),this.dialogFormVisible1=!1},toAdd(){this.dialogFormVisible=!0},save(){const e=this.role;e.id==0?D(e).then(t=>{if(console.log(t.success),t.success)this.dialogFormVisible=!1,this.getRolesPage(this.page.current),d(t.msg);else return d(t.msg),!1}).catch(t=>{d("网络错误联系管理员")}):I(e).then(t=>{if(console.log(t.success),t.success)this.dialogFormVisible=!1,this.getRolesPage(this.page.current),d(t.msg);else return d(t.msg),!1}).catch(t=>{d("网络错误联系管理员Edit")})}}}),U={style:{margin:"80px 150px"}},L={style:{margin:"10px 0px"}},M={class:"dialog-footer"};function O(e,t,a,u,W,j){const r=q,i=z,c=P,g=$,f=N,h=R,_=T,b=v;return k(),F(w,null,[o(r,{onClick:e.get},{default:l(()=>[n("返回")]),_:1},8,["onClick"]),p("div",U,[p("div",L,[o(r,{type:"info",onClick:e.toAdd,round:""},{default:l(()=>[n("添加")]),_:1},8,["onClick"])]),o(c,{data:e.roles,style:{width:"100%","border-style":"solid","border-width":"medium"},"header-cell-style":{"text-align":"center"}},{default:l(()=>[o(i,{fixed:"",prop:"id",label:"ID",align:"center",width:"120"}),o(i,{prop:"roleName",label:"角色名",align:"center",width:"210"}),o(i,{prop:"status",label:"状态",align:"center",width:"120",formatter:e.formatterState},null,8,["formatter"]),o(i,{prop:"createTime",label:"创建时间",align:"center",width:"250"}),o(i,{prop:"updateTime",label:"更新时间",align:"center",width:"250"}),o(i,{fixed:"right",label:"操作",align:"center",width:"200"},{default:l(s=>[o(r,{type:"info",size:"small",onClick:C=>e.toEdit(s.row)},{default:l(()=>[n("更新")]),_:2},1032,["onClick"]),o(r,{type:"info",size:"small",onClick:C=>e.dele(s.row.id)},{default:l(()=>[n("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(g,{"current-page":e.page.current,total:e.page.total,"page-size":e.page.size,onCurrentChange:e.getRolesPage},null,8,["current-page","total","page-size","onCurrentChange"])]),o(b,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":t[2]||(t[2]=s=>e.dialogFormVisible=s),title:"用户编辑"},{footer:l(()=>[p("span",M,[o(r,{onClick:t[1]||(t[1]=s=>e.dialogFormVisible=!1)},{default:l(()=>[n("取消")]),_:1}),o(r,{type:"primary",onClick:e.save},{default:l(()=>[n(" 保存 ")]),_:1},8,["onClick"])])]),default:l(()=>[o(_,{model:e.role},{default:l(()=>[o(h,{label:"角色名","label-width":140},{default:l(()=>[o(f,{modelValue:e.role.roleName,"onUpdate:modelValue":t[0]||(t[0]=s=>e.role.roleName=s),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const Y=V(S,[["render",O]]);export{Y as default};
